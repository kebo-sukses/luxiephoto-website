<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex" />
  <title>LuxiePhoto - Content Manager</title>
  <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    }
    [class*="AppHeader"] {
      background: linear-gradient(135deg, #388f6b 0%, #215c45 100%) !important;
    }
  </style>
  <script>
    window.CMS_MANUAL_INIT = true;
  </script>
</head>
<body>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  <script>
    CMS.init({
      config: {
        load_config_file: false,
        backend: {
          name: 'github',
          repo: 'kebo-sukses/luxiephoto-website',
          branch: 'main',
          base_url: 'https://luxiephoto.com',
          auth_endpoint: '/api/auth'
        },
        media_folder: 'public/image',
        public_folder: '/image',
        logo_url: '/logo/Gold-Logo.webp',
        site_url: 'https://luxiephoto.com',
        display_url: 'https://luxiephoto.com',
        slug: {
          encoding: 'ascii',
          clean_accents: true,
          sanitize_replacement: '-'
        },
        collections: [
          {
            name: 'settings',
            label: 'âš™ï¸ Site Settings',
            files: [
              {
                name: 'general',
                label: 'General Settings',
                file: 'content/settings/general.json',
                fields: [
                  { name: 'siteName', label: 'Site Name', widget: 'string', default: 'LuxiePhoto' },
                  { name: 'tagline', label: 'Tagline', widget: 'string', required: false },
                  { name: 'email', label: 'Email', widget: 'string', required: false },
                  { name: 'phone', label: 'Phone', widget: 'string', required: false },
                  { name: 'address', label: 'Address', widget: 'text', required: false },
                  { name: 'favicon', label: 'Favicon', widget: 'image', required: false, hint: 'Icon browser tab (format .ico atau .png)' },
                  { name: 'logoLight', label: 'Logo Light/White (untuk header gelap)', widget: 'image', required: false, hint: 'Logo putih untuk header transparan' },
                  { name: 'logoLightHeight', label: 'Logo Light Height (px)', widget: 'number', default: 48, min: 24, max: 120, required: false, hint: 'Ukuran tinggi logo dalam pixel (24-120px)' },
                  { name: 'logoDark', label: 'Logo Dark (untuk header terang)', widget: 'image', required: false, hint: 'Logo untuk header putih setelah scroll' },
                  { name: 'logoDarkHeight', label: 'Logo Dark Height (px)', widget: 'number', default: 48, min: 24, max: 120, required: false, hint: 'Ukuran tinggi logo dalam pixel (24-120px)' },
                  { name: 'logoFooter', label: 'Logo Footer', widget: 'image', required: false },
                  {
                    name: 'social',
                    label: 'Social Media',
                    widget: 'object',
                    required: false,
                    fields: [
                      { name: 'instagram', label: 'Instagram URL', widget: 'string', required: false },
                      { name: 'facebook', label: 'Facebook URL', widget: 'string', required: false },
                      { name: 'youtube', label: 'YouTube URL', widget: 'string', required: false },
                      { name: 'whatsapp', label: 'WhatsApp Number', widget: 'string', required: false, hint: 'Format: 6282169990088 (tanpa + atau spasi)' }
                    ]
                  }
                ]
              }
            ]
          },
          {
            name: 'hero',
            label: 'ðŸ  Hero Section',
            files: [
              {
                name: 'hero',
                label: 'Hero Content',
                file: 'content/hero/hero.json',
                fields: [
                  { name: 'subtitle', label: 'Subtitle', widget: 'string', default: 'We Don\'t Live Forever. Memories Do.' },
                  { name: 'title', label: 'Title (Judul Utama)', widget: 'string', default: 'Timeless Moments.' },
                  { name: 'backgroundImages', label: 'Background Images', widget: 'list', required: false, field: { name: 'image', label: 'Image', widget: 'image' } }
                ]
              }
            ]
          },
          {
            name: 'about',
            label: 'ðŸ‘¤ About Section',
            files: [
              {
                name: 'about',
                label: 'About Content',
                file: 'content/about/about.json',
                fields: [
                  { name: 'subtitle', label: 'Subtitle', widget: 'string', default: 'About Us' },
                  { name: 'decorativeText', label: 'Decorative Text', widget: 'string', default: 'Our Story' },
                  { name: 'title', label: 'Title', widget: 'string' },
                  { name: 'description', label: 'Description', widget: 'text' },
                  { name: 'image', label: 'About Image', widget: 'image', required: false },
                  { name: 'signature', label: 'Signature Name', widget: 'string', required: false },
                  { name: 'experience', label: 'Experience Text', widget: 'string', default: '15+ Years of Excellence', required: false },
                  { name: 'features', label: 'Features', widget: 'list', required: false, fields: [
                    { name: 'title', label: 'Title', widget: 'string' },
                    { name: 'description', label: 'Description', widget: 'text' }
                  ]}
                ]
              }
            ]
          },
          {
            name: 'portfolio',
            label: 'ðŸ“¸ Portfolio',
            folder: 'content/portfolio',
            create: true,
            slug: '{{slug}}',
            extension: 'json',
            format: 'json',
            fields: [
              { name: 'names', label: 'Couple Names', widget: 'string' },
              { name: 'category', label: 'Category', widget: 'select', options: ['Wedding', 'Pre-Wedding', 'Engagement', 'Garden Wedding', 'Beach Wedding', 'Rustic Wedding', 'Luxury Wedding', 'Traditional Wedding', 'Mountain Wedding', 'Castle Wedding'] },
              { name: 'location', label: 'Location', widget: 'string' },
              { name: 'description', label: 'Description', widget: 'text' },
              { name: 'image', label: 'Main Image', widget: 'image' },
              { name: 'date', label: 'Date', widget: 'datetime', required: false },
              { name: 'featured', label: 'Featured', widget: 'boolean', default: false },
              { name: 'gallery', label: 'Gallery Images', widget: 'list', required: false, field: { name: 'image', label: 'Image', widget: 'image' } }
            ]
          },
          {
            name: 'testimonials',
            label: 'ðŸ’¬ Testimonials',
            folder: 'content/testimonials',
            create: true,
            slug: '{{slug}}',
            extension: 'json',
            format: 'json',
            fields: [
              { name: 'names', label: 'Couple Names', widget: 'string' },
              { name: 'role', label: 'Role', widget: 'string', default: 'Bride & Groom' },
              { name: 'rating', label: 'Rating', widget: 'number', min: 1, max: 5, default: 5 },
              { name: 'text', label: 'Testimonial Text', widget: 'text' },
              { name: 'location', label: 'Location/Event', widget: 'string' },
              { name: 'avatar', label: 'Avatar Image', widget: 'image', required: false },
              { name: 'image', label: 'Wedding Image', widget: 'image', required: false }
            ]
          },
          {
            name: 'pricing',
            label: 'ðŸ’° Pricing Plans',
            folder: 'content/pricing',
            create: true,
            slug: '{{slug}}',
            extension: 'json',
            format: 'json',
            fields: [
              { name: 'name', label: 'Plan Name', widget: 'string' },
              { name: 'subtitle', label: 'Subtitle', widget: 'string' },
              { name: 'price', label: 'Price', widget: 'number' },
              { name: 'currency', label: 'Currency', widget: 'string', default: 'Rp' },
              { name: 'period', label: 'Period', widget: 'string', default: 'per event' },
              { name: 'popular', label: 'Popular Badge', widget: 'boolean', default: false },
              { name: 'order', label: 'Display Order', widget: 'number', default: 1 },
              { name: 'ctaText', label: 'Button Text', widget: 'string', default: 'Choose Plan' },
              { name: 'ctaLink', label: 'Button Link (URL)', widget: 'string', hint: 'Link tujuan saat tombol diklik. Contoh: https://wa.me/628xxx', required: false },
              { name: 'features', label: 'Included Features', widget: 'list', field: { name: 'feature', label: 'Feature', widget: 'string' } },
              { name: 'notIncluded', label: 'Not Included', widget: 'list', required: false, field: { name: 'feature', label: 'Feature', widget: 'string' } }
            ]
          },
          {
            name: 'partners',
            label: 'ðŸ¤ Partners',
            folder: 'content/partners',
            create: true,
            slug: '{{slug}}',
            extension: 'json',
            format: 'json',
            fields: [
              { name: 'name', label: 'Partner Name', widget: 'string' },
              { name: 'logo', label: 'Logo', widget: 'image', required: false },
              { name: 'website', label: 'Website', widget: 'string', required: false },
              { name: 'order', label: 'Display Order', widget: 'number', default: 1 }
            ]
          },
          {
            name: 'services',
            label: 'ðŸ› ï¸ Services',
            folder: 'content/services',
            create: true,
            slug: '{{slug}}',
            extension: 'json',
            format: 'json',
            fields: [
              { name: 'id', label: 'ID (unique)', widget: 'string', hint: 'ID unik untuk service, contoh: wedding-photography' },
              { name: 'title', label: 'Service Title', widget: 'string' },
              { name: 'icon', label: 'Icon', widget: 'select', options: ['Camera', 'Video', 'Brush', 'Heart'], default: 'Camera' },
              { name: 'description', label: 'Description', widget: 'text' },
              { name: 'order', label: 'Display Order', widget: 'number', default: 1 },
              { name: 'features', label: 'Features', widget: 'list', required: false, field: { name: 'feature', label: 'Feature', widget: 'string' } }
            ]
          },
          {
            name: 'contact',
            label: 'ðŸ“ž Contact Info',
            files: [
              {
                name: 'contact',
                label: 'Contact Information',
                file: 'content/contact/contact.json',
                fields: [
                  { name: 'subtitle', label: 'Section Subtitle', widget: 'string', default: 'Get In Touch' },
                  { name: 'decorativeText', label: 'Decorative Text', widget: 'string', default: 'Contact' },
                  { name: 'title', label: 'Section Title', widget: 'string', default: "Let's Create Something Beautiful Together" },
                  { name: 'description', label: 'Section Description', widget: 'text', required: false },
                  { name: 'formTitle', label: 'Form Title', widget: 'string', default: 'Book a Session', required: false },
                  { name: 'formDescription', label: 'Form Description', widget: 'string', default: "Fill out the form and we'll get back to you within 24 hours.", required: false },
                  { name: 'address', label: 'Address', widget: 'text', required: false },
                  { name: 'phone', label: 'Phone', widget: 'string', required: false },
                  { name: 'email', label: 'Email', widget: 'string', required: false },
                  { name: 'website', label: 'Website', widget: 'string', required: false },
                  { name: 'hours', label: 'Business Hours', widget: 'string', required: false },
                  {
                    name: 'social',
                    label: 'Social Media',
                    widget: 'object',
                    required: false,
                    fields: [
                      { name: 'instagram', label: 'Instagram', widget: 'string', required: false },
                      { name: 'facebook', label: 'Facebook', widget: 'string', required: false },
                      { name: 'pinterest', label: 'Pinterest', widget: 'string', required: false },
                      { name: 'youtube', label: 'YouTube', widget: 'string', required: false }
                    ]
                  }
                ]
              }
            ]
          },
          {
            name: 'blog',
            label: 'ðŸ“ Blog Posts',
            folder: 'content/blog',
            create: true,
            slug: '{{slug}}',
            extension: 'json',
            format: 'json',
            fields: [
              { name: 'title', label: 'Title', widget: 'string' },
              { name: 'date', label: 'Publish Date', widget: 'datetime' },
              { name: 'author', label: 'Author', widget: 'string', default: 'Admin' },
              { name: 'category', label: 'Category', widget: 'select', options: ['Tips', 'Inspiration', 'Behind the Scenes', 'News'] },
              { name: 'image', label: 'Featured Image', widget: 'image' },
              { name: 'excerpt', label: 'Excerpt', widget: 'text' },
              { name: 'body', label: 'Body', widget: 'markdown' }
            ]
          }
        ]
      }
    });

    // Auto-trigger Vercel deploy after publish
    const VERCEL_DEPLOY_HOOK = 'https://api.vercel.com/v1/integrations/deploy/prj_oo826kAdlPkbAYbtun1qlYWkyyXR/bSZMpdYcq0';
    
    CMS.registerEventListener({
      name: 'postSave',
      handler: async ({ entry }) => {
        console.log('Content saved, triggering Vercel deploy...');
        try {
          const response = await fetch(VERCEL_DEPLOY_HOOK, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            }
          });
          if (response.ok) {
            console.log('Vercel deploy triggered successfully!');
            setTimeout(() => {
              alert('âœ… Published! Website will update in ~1-2 minutes.');
            }, 500);
          } else {
            console.error('Failed to trigger deploy:', response.status);
          }
        } catch (error) {
          console.error('Error triggering deploy:', error);
        }
      }
    });
  </script>
</body>
</html>
